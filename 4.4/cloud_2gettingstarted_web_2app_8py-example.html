<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection Python: cloud/gettingstarted_web/app.py</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="examplegrabber.js"></script>
<script type="text/javascript" src="testedversionsgrabber.js"></script>
<script type="text/javascript" src="search51.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png" style="width:172px;"/></a>
  <span class="c-tagline">51Degrees Device Detection Python
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Device Detection services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
  <section class="g-search">
    <div class="c-search is-openable" id="searchOpenable">
    <form class="c-search__form">
      <div class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img src="icon-search.svg" class="b-icon" alt="Search" />
        <input type="text" class="c-search__input" id="inputSearch" onkeyup="javascript:onSearch(this,event.keyCode)" placeholder="Search" aria-label="Search">
      </div>
    </form>
    <div class="c-search__content" id="searchContent">
    </div>
  </div> 
  </section>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cloud_2gettingstarted_web_2app_8py-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<div class="g-docs__header">
<h2 class="g-docs__page-title">cloud/gettingstarted_web/app.py</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>This example is available in full on <a href="https://github.com/51Degrees/device-detection-python/blob/main/fiftyone_devicedetection_examples/fiftyone_devicedetection_examples/cloud/gettingstarted_web/app.py">GitHub</a>.</p>
<p>
<p>
To run this example, you will need to create a <strong>resource key</strong>. 
The resource key is used as shorthand to store the particular set of 
properties you are interested in as well as any associated license keys 
that entitle you to increased request limits and/or paid-for properties.
</p>
<p>
You can create a resource key using the 51Degrees 
<a href="https://configure.51degrees.com">Configurator</a>.
</p>
</p>
<p>Required PyPi Dependencies:</p><ul>
<li><a class="el" href="namespacefiftyone__devicedetection.html">fiftyone_devicedetection</a></li>
<li>flask</li>
</ul>
<h2>Overview</h2>
<p>The <code>DeviceDetectionPipelineBuilder</code> class is used to create a Pipeline instance from the configuration that is supplied. The fiftyone_pipeline_core.web module contains helpers which deal with automatically populating evidence from a web request. </p><div class="c-code__block c-code__block--outline"><div class="c-code__line"><a name="l00001"></a><span class="lineno">    1</span>&#160;flowdata.evidence.add_from_dict(webevidence(request))</div></div><div class="c-code__block c-code__block--outline"><div class="c-code__line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="c-code__comment"># *********************************************************************</span></div><div class="c-code__line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="c-code__comment"># This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="c-code__comment"># Copyright 2023 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="c-code__comment"># Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="c-code__comment"># This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="c-code__comment"># (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="c-code__comment"># If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="c-code__comment"># one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="c-code__comment"># The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="c-code__comment"># amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="c-code__comment"># the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="c-code__comment"># clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="c-code__comment"># If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="c-code__comment"># including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="c-code__comment"># in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="c-code__comment"># such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="c-code__comment"># ********************************************************************* </span></div><div class="c-code__line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="c-code__line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="c-code__line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="c-code__line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="c-code__line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="c-code__comment"># The module can also handling setting response headers (e.g. Accept-CH for User-Agent </span></div><div class="c-code__line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="c-code__comment"># Client Hints) and serving requests for client-side JavaScript and JSON resources.</span></div><div class="c-code__line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="c-code__comment"># ```{py}</span></div><div class="c-code__line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="c-code__comment"># set_response_header(flowdata, response)</span></div><div class="c-code__line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="c-code__comment"># ```</span></div><div class="c-code__line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="c-code__comment"># </span></div><div class="c-code__line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="c-code__comment"># The results of detection can be accessed by through the flowdata object once</span></div><div class="c-code__line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="c-code__comment"># processed. This can then be used to interrogate the data.</span></div><div class="c-code__line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="c-code__comment"># ```{py}</span></div><div class="c-code__line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="c-code__comment"># flowdata.process()</span></div><div class="c-code__line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="c-code__comment"># device = flowdata.device</span></div><div class="c-code__line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="c-code__comment"># hardware_vendor = device.hardwarevendor</span></div><div class="c-code__line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="c-code__comment"># ```</span></div><div class="c-code__line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="c-code__comment"># </span></div><div class="c-code__line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="c-code__comment"># Results can also be accessed in client-side code by using the `fod` object. See the </span></div><div class="c-code__line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="c-code__comment"># [JavaScriptBuilderElementBuilder](https://51degrees.com/pipeline-python/4.3/classpipeline-python_1_1fiftyone__pipeline__core_1_1fiftyone__pipeline__core_1_1javascriptbuilde778a9036818b19ab55d981a40be4a4d7.html)</span></div><div class="c-code__line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="c-code__comment"># for details on available settings such as changing the `fod` name.</span></div><div class="c-code__line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="c-code__comment"># ```{js}</span></div><div class="c-code__line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="c-code__comment"># window.onload = function () {</span></div><div class="c-code__line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="c-code__comment">#     fod.complete(function(data) {</span></div><div class="c-code__line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="c-code__comment">#         var hardwareName = data.device.hardwarename;</span></div><div class="c-code__line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="c-code__comment">#         alert(hardwareName.join(&quot;, &quot;));</span></div><div class="c-code__line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="c-code__comment">#     }</span></div><div class="c-code__line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="c-code__comment"># }</span></div><div class="c-code__line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="c-code__comment"># ```</span></div><div class="c-code__line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="c-code__comment"># ## View</span></div><div class="c-code__line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="c-code__comment"># @include templates/index.html</span></div><div class="c-code__line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="c-code__comment"># ## App</span></div><div class="c-code__line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="c-code__line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="c-code__keyword">from</span> <a class="code" href="namespacefiftyone__devicedetection__examples_1_1example__utils.html">fiftyone_devicedetection_examples.example_utils</a> <span class="c-code__keyword">import</span> ExampleUtils</div><div class="c-code__line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="c-code__keyword">from</span> flask <span class="c-code__keyword">import</span> Flask, request, render_template</div><div class="c-code__line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="c-code__keyword">from</span> flask.helpers <span class="c-code__keyword">import</span> make_response</div><div class="c-code__line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="c-code__keyword">from</span> <a class="code" href="namespacefiftyone__devicedetection_1_1devicedetection__pipelinebuilder.html">fiftyone_devicedetection.devicedetection_pipelinebuilder</a> <span class="c-code__keyword">import</span> DeviceDetectionPipelineBuilder</div><div class="c-code__line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="c-code__keyword">from</span> fiftyone_pipeline_core.logger <span class="c-code__keyword">import</span> Logger</div><div class="c-code__line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="c-code__keyword">from</span> fiftyone_pipeline_core.web <span class="c-code__keyword">import</span> webevidence, set_response_header</div><div class="c-code__line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="c-code__keyword">import</span> json</div><div class="c-code__line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="c-code__keyword">import</span> sys</div><div class="c-code__line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="c-code__line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="c-code__keyword">class </span>GettingStartedWeb():</div><div class="c-code__line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    app = Flask(__name__)</div><div class="c-code__line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="c-code__line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="c-code__keyword">def </span><a class="code" href="namespacebuild.html">build</a>(self, resource_key, logger):</div><div class="c-code__line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="c-code__comment"># Here we add some callback settings for the page to make a request with extra evidence from the client side, in this case the Flask /json route we will make below</span></div><div class="c-code__line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="c-code__line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        javascript_builder_settings = {</div><div class="c-code__line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="c-code__stringliteral">&quot;endpoint&quot;</span>: <span class="c-code__stringliteral">&quot;/json&quot;</span>,</div><div class="c-code__line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="c-code__stringliteral">&quot;minify&quot;</span>: <span class="c-code__keyword">True</span>,</div><div class="c-code__line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="c-code__comment"># The enable_cookies setting is needed if you want to work with results from client-side</span></div><div class="c-code__line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="c-code__comment"># evidence on the server. For example, precise Apple models or screen dimensions.</span></div><div class="c-code__line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="c-code__comment"># This will store the results of client-side detection scripts on the client as cookies.</span></div><div class="c-code__line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="c-code__comment"># On subsequent requests, these cookies will be included in the payload and will be </span></div><div class="c-code__line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="c-code__comment"># used by the device detection API when it runs.</span></div><div class="c-code__line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="c-code__stringliteral">&quot;enable_cookies&quot;</span>: <span class="c-code__keyword">True</span></div><div class="c-code__line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div><div class="c-code__line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        GettingStartedWeb.pipeline = DeviceDetectionPipelineBuilder(</div><div class="c-code__line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            resource_key = resource_key, </div><div class="c-code__line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            javascript_builder_settings = javascript_builder_settings).add_logger(logger).<a class="code" href="namespacebuild.html">build</a>()</div><div class="c-code__line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        </div><div class="c-code__line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="c-code__keywordflow">return</span> self</div><div class="c-code__line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="c-code__line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="c-code__keyword">def </span><a class="code" href="namespacefiftyone__devicedetection__examples_1_1onpremise_1_1performance.html#a78b63f027c93544e4a7174f8b56d0a03">run</a>(self):</div><div class="c-code__line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="c-code__line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        GettingStartedWeb.app.run()</div><div class="c-code__line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="c-code__line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="c-code__comment"># First we make a JSON route that will be called from the client side and will return</span></div><div class="c-code__line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="c-code__comment"># a JSON encoded property database using any additional evidence provided by the client </span></div><div class="c-code__line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="c-code__line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    @staticmethod</div><div class="c-code__line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    @app.route(<span class="c-code__stringliteral">&#39;/json&#39;</span>, methods=[<span class="c-code__stringliteral">&#39;POST&#39;</span>])</div><div class="c-code__line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="c-code__keyword">def </span>jsonroute():</div><div class="c-code__line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="c-code__line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="c-code__comment"># Create the flowdata object for the JSON route</span></div><div class="c-code__line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        flowdata = GettingStartedWeb.pipeline.create_flowdata()</div><div class="c-code__line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="c-code__line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="c-code__comment"># Add any information from the request (headers, cookies and additional </span></div><div class="c-code__line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="c-code__comment"># client side provided information)</span></div><div class="c-code__line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="c-code__line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        flowdata.evidence.add_from_dict(webevidence(request))</div><div class="c-code__line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="c-code__line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="c-code__comment"># Process the flowdata</span></div><div class="c-code__line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="c-code__line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        flowdata.process()</div><div class="c-code__line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="c-code__line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="c-code__comment"># Return the JSON from the JSONBundler engine</span></div><div class="c-code__line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="c-code__line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="c-code__keywordflow">return</span> json.dumps(flowdata.jsonbundler.json)</div><div class="c-code__line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="c-code__line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="c-code__comment"># In the main route we dynamically update the screen&#39;s device property display</span></div><div class="c-code__line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="c-code__comment"># using the above JSON route</span></div><div class="c-code__line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="c-code__line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    @staticmethod</div><div class="c-code__line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    @app.route(<span class="c-code__stringliteral">&#39;/&#39;</span>)</div><div class="c-code__line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="c-code__keyword">def </span><a class="code" href="namespacefiftyone__devicedetection__examples_1_1cloud_1_1useragentclienthints-web.html#a68158885c6f37366b2a30b529907cd1d">server</a>():</div><div class="c-code__line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="c-code__line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="c-code__comment"># Create the flowdata object for the JSON route</span></div><div class="c-code__line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        flowdata = GettingStartedWeb.pipeline.create_flowdata()</div><div class="c-code__line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="c-code__line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="c-code__comment"># Add any information from the request (headers, cookies and additional </span></div><div class="c-code__line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="c-code__comment"># client side provided information)</span></div><div class="c-code__line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="c-code__line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        flowdata.evidence.add_from_dict(webevidence(request))</div><div class="c-code__line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="c-code__line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="c-code__comment"># Process the flowdata</span></div><div class="c-code__line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="c-code__line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        flowdata.process()</div><div class="c-code__line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="c-code__line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        response = make_response()</div><div class="c-code__line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="c-code__line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="c-code__comment"># Some browsers require that extra HTTP headers are explicitly</span></div><div class="c-code__line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="c-code__comment"># requested. So set whatever headers are required by the browser in</span></div><div class="c-code__line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="c-code__comment"># order to return the evidence needed by the pipeline.</span></div><div class="c-code__line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="c-code__comment"># More info on this can be found at</span></div><div class="c-code__line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="c-code__comment"># https://51degrees.com/blog/user-agent-client-hints</span></div><div class="c-code__line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="c-code__line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        set_response_header(flowdata, response)</div><div class="c-code__line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="c-code__line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="c-code__comment"># Generate the HTML</span></div><div class="c-code__line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        response.set_data(render_template(</div><div class="c-code__line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="c-code__stringliteral">&#39;index.html&#39;</span>,</div><div class="c-code__line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            data=flowdata,</div><div class="c-code__line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            utils=ExampleUtils,</div><div class="c-code__line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            response=response))</div><div class="c-code__line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="c-code__line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="c-code__keywordflow">return</span> response</div><div class="c-code__line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="c-code__line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="c-code__keyword">def </span><a class="code" href="namespacefiftyone__devicedetection__examples_1_1cloud_1_1configurator__console.html#a31f39d9a32101ea67a5ee9b028ebd760">main</a>(argv):</div><div class="c-code__line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="c-code__comment"># Use the command line args to get the resource key if present.</span></div><div class="c-code__line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="c-code__comment"># Otherwise, get it from the environment variable.</span></div><div class="c-code__line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    resource_key = argv[0] <span class="c-code__keywordflow">if</span> len(argv) &gt; 0 <span class="c-code__keywordflow">else</span> ExampleUtils.get_resource_key() </div><div class="c-code__line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    </div><div class="c-code__line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="c-code__comment"># Configure a logger to output to the console.</span></div><div class="c-code__line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    logger = Logger(min_level=<span class="c-code__stringliteral">&quot;info&quot;</span>)</div><div class="c-code__line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="c-code__line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="c-code__keywordflow">if</span> (resource_key):</div><div class="c-code__line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        GettingStartedWeb().<a class="code" href="namespacebuild.html">build</a>(resource_key, logger).<a class="code" href="namespacefiftyone__devicedetection__examples_1_1onpremise_1_1performance.html#a78b63f027c93544e4a7174f8b56d0a03">run</a>()</div><div class="c-code__line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="c-code__line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        logger.log(<span class="c-code__stringliteral">&quot;error&quot;</span>,</div><div class="c-code__line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="c-code__stringliteral">&quot;No resource key specified in environment variable &quot;</span> +</div><div class="c-code__line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            f<span class="c-code__stringliteral">&quot;&#39;{ExampleUtils.RESOURCE_KEY_ENV_VAR}&#39;. The 51Degrees &quot;</span> +</div><div class="c-code__line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="c-code__stringliteral">&quot;cloud service is accessed using a &#39;ResourceKey&#39;. &quot;</span> +</div><div class="c-code__line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="c-code__stringliteral">&quot;For more detail see &quot;</span> +</div><div class="c-code__line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="c-code__stringliteral">&quot;http://51degrees.com/documentation/4.3/_info__resource_keys.html. &quot;</span> +</div><div class="c-code__line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="c-code__stringliteral">&quot;A resource key with the properties required by this &quot;</span> +</div><div class="c-code__line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="c-code__stringliteral">&quot;example can be created for free at &quot;</span> +</div><div class="c-code__line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="c-code__stringliteral">&quot;https://configure.51degrees.com/g3gMZdPY. &quot;</span> +</div><div class="c-code__line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="c-code__stringliteral">&quot;Once complete, populated the environment variable &quot;</span> +</div><div class="c-code__line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="c-code__stringliteral">&quot;mentioned at the start of this message with the key.&quot;</span>)</div><div class="c-code__line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="c-code__line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="c-code__keywordflow">if</span> __name__ == <span class="c-code__stringliteral">&quot;__main__&quot;</span>:</div><div class="c-code__line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="namespacefiftyone__devicedetection__examples_1_1cloud_1_1configurator__console.html#a31f39d9a32101ea67a5ee9b028ebd760">main</a>(sys.argv[1:])</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
